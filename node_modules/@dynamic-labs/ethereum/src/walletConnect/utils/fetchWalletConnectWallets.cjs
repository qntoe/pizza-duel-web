'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var WalletConnectConnector = require('../WalletConnectConnector/WalletConnectConnector.cjs');

const fetchWalletConnectWallets = ({ walletBook, applyFilterFromWalletConnect = true, evmNetworks, }) => {
    var _a;
    // Don't create EVM WalletConnect connectors if EVM networks are not configured
    const hasEvmNetworks = evmNetworks && evmNetworks.length > 0;
    if (!hasEvmNetworks) {
        return [];
    }
    return Object.entries((_a = walletBook === null || walletBook === void 0 ? void 0 : walletBook.wallets) !== null && _a !== void 0 ? _a : {})
        .filter(([, wallet]) => {
        var _a;
        return wallet.walletConnect &&
            (!applyFilterFromWalletConnect || !wallet.filterFromWalletConnect) &&
            (
            // Exclude wallets that don't support Evm
            (_a = wallet.chains) === null || _a === void 0 ? void 0 : _a.some((chain) => chain.includes('eip155:')));
    })
        .map(([key, wallet]) => {
        const { shortName } = wallet;
        const name = shortName || wallet.name;
        return class extends WalletConnectConnector.WalletConnectConnector {
            constructor(props) {
                super(Object.assign(Object.assign({}, props), { walletName: name }));
                this.overrideKey = key;
            }
        };
    });
};

exports.fetchWalletConnectWallets = fetchWalletConnectWallets;
