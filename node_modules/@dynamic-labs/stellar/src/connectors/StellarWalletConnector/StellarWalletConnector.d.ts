import { Horizon } from '@stellar/stellar-sdk';
import { Logger } from '@dynamic-labs/logger';
import type { GenericNetwork, IUITransaction } from '@dynamic-labs/types';
import { type Chain, WalletConnectorBase } from '@dynamic-labs/wallet-connector-core';
import { WalletAdditionalAddress } from '@dynamic-labs/sdk-api-core';
import type { IStellarProvider, StellarWalletConnectorProps } from '../../types';
import { StellarWallet } from '../../wallet/StellarWallet';
import { IStellarSessionCache } from '../../StellarLocalStorageCache';
/**
 * Abstract base class for all Stellar wallet connectors.
 *
 * This class provides the common functionality needed by all
 * Stellar wallet implementations. It handles connection management,
 * network operations, and transaction signing.
 */
export declare abstract class StellarWalletConnector extends WalletConnectorBase<typeof StellarWallet> {
    cache: IStellarSessionCache;
    name: string;
    ChainWallet: typeof StellarWallet;
    connectedChain: Chain;
    supportedChains: Chain[];
    /** Logger instance */
    logger: Logger;
    /** Connection state */
    protected isConnecting: boolean;
    /** Flag to track if connection was cancelled by disconnect */
    private connectionCancelled;
    /** Connected public key */
    protected connectedPublicKey: string | undefined;
    /** Promise cache to prevent multiple simultaneous getAddress calls */
    private getAddressPromise;
    private selectedNetwork;
    stellarNetworks: GenericNetwork[];
    constructor(name: string, opts: StellarWalletConnectorProps);
    /**
     * Abstract method to get the wallet provider.
     * Must be implemented by concrete connector classes.
     */
    abstract getProvider(): IStellarProvider | undefined;
    getEnabledNetworks(): GenericNetwork[];
    getSelectedNetwork(): GenericNetwork | undefined;
    getNetwork(): Promise<string | undefined>;
    /**
     * Checks if the provider is already connected.
     */
    protected isProviderConnected(): Promise<boolean>;
    /**
     * Connects to the Stellar wallet.
     */
    connect(): Promise<void>;
    /**
     * Disconnects from the wallet.
     */
    disconnect(): Promise<void>;
    /**
     * Signs a Stellar transaction XDR.
     */
    signTransaction(transactionXdr: string): Promise<string>;
    /**
     * Signs a message.
     */
    signMessage(messageToSign: string): Promise<string | undefined>;
    getHorizonServer(): Promise<Horizon.Server>;
    /**
     * Gets the network passphrase for the current network.
     * @returns The network passphrase string
     */
    getNetworkPassphrase(): Promise<string>;
    isTestnet(): Promise<boolean>;
    /**
     * Gets the connected public key.
     */
    getConnectedPublicKey(): string | undefined;
    /**
     * Fetches the public address from the wallet provider.
     * This method ensures the wallet is connected before fetching the address.
     * Override this method in child classes if the wallet has a custom way to fetch addresses.
     * @returns The public address from the wallet
     */
    protected fetchPublicAddress(): Promise<string>;
    /**
     * Gets the address from cache or fetches it from the wallet.
     * This implementation avoids prompting the user unnecessarily by checking cache first.
     * Uses promise caching to prevent multiple simultaneous calls.
     */
    getAddress(): Promise<string>;
    /**
     * Clears all connected accounts from cache.
     */
    clearConnectedAccounts(): Promise<void>;
    /**
     * Gets connected accounts from cache.
     */
    getConnectedAccountsFromCache(): Promise<string[]>;
    /**
     * Gets connected accounts.
     * Returns accounts from cache to avoid prompting the user.
     */
    getConnectedAccounts(): Promise<string[]>;
    /**
     * Gets additional addresses for a main address.
     */
    getAdditionalAddresses(mainAddress?: string): Promise<WalletAdditionalAddress[]>;
    /**
     * Sets additional addresses for a main address.
     */
    setAdditionalAddresses(mainAddress: string, additionalAddresses: WalletAdditionalAddress[]): Promise<void>;
    /**
     * Ends the session and clears connected accounts.
     */
    endSession(): Promise<void>;
    /**
     * Function used to create transactions in the SDK interface
     *
     * @param from - The sender's address (Stellar public key)
     * @returns A new StellarUiTransaction instance
     */
    createUiTransaction(from: string): Promise<IUITransaction>;
}
