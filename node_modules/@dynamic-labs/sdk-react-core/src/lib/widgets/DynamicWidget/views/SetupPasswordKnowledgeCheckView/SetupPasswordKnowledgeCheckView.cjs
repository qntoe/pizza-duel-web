'use client'
'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var jsxRuntime = require('react/jsx-runtime');
var React = require('react');
var reactI18next = require('react-i18next');
var Alert = require('../../../../components/Alert/Alert.cjs');
var Icon = require('../../../../components/Icon/Icon.cjs');
var IconButton = require('../../../../components/IconButton/IconButton.cjs');
var ModalHeader = require('../../../../components/ModalHeader/ModalHeader.cjs');
var Typography = require('../../../../components/Typography/Typography.cjs');
var TypographyButton = require('../../../../components/TypographyButton/TypographyButton.cjs');
var chevronLeft = require('../../../../shared/assets/chevron-left.cjs');
var exclamationCircle = require('../../../../shared/assets/exclamation-circle.cjs');
var knowledgeCheckIcon = require('../../../../shared/assets/knowledge-check-icon.cjs');
require('@dynamic-labs/iconic');
require('../../../../context/ViewContext/ViewContext.cjs');

const CORRECT_ANSWER = 'c';
const OPTIONS = [
    {
        label: 'A',
        translationKey: 'dyn_setup_password.knowledge_check.option_a',
        value: 'a',
    },
    {
        label: 'B',
        translationKey: 'dyn_setup_password.knowledge_check.option_b',
        value: 'b',
    },
    {
        label: 'C',
        translationKey: 'dyn_setup_password.knowledge_check.option_c',
        value: 'c',
    },
];
const SetupPasswordKnowledgeCheckView = ({ onContinue, onBack }) => {
    const { t } = reactI18next.useTranslation();
    const [selectedAnswer, setSelectedAnswer] = React.useState('');
    const [showError, setShowError] = React.useState(false);
    const handleAnswerChange = React.useCallback((e) => {
        setSelectedAnswer(e.target.value);
        setShowError(false);
    }, []);
    const handleContinue = React.useCallback(() => {
        if (selectedAnswer === CORRECT_ANSWER) {
            onContinue();
        }
        else {
            setShowError(true);
        }
    }, [selectedAnswer, onContinue]);
    const backButton = (jsxRuntime.jsx(IconButton.IconButton, { type: 'button', onClick: onBack, "data-testid": 'setup-password-knowledge-check-back-button', children: jsxRuntime.jsx(chevronLeft.ReactComponent, {}) }));
    return (jsxRuntime.jsxs(jsxRuntime.Fragment, { children: [jsxRuntime.jsx(ModalHeader.ModalHeader, { leading: backButton, children: jsxRuntime.jsx(Typography.Typography, { variant: 'title', color: 'primary', copykey: 'dyn_setup_password.knowledge_check.title', children: t('dyn_setup_password.knowledge_check.title') }) }), jsxRuntime.jsx("div", { className: 'setup-password-knowledge-check-view', children: jsxRuntime.jsxs("div", { className: 'setup-password-knowledge-check-view__body', children: [jsxRuntime.jsxs("div", { children: [jsxRuntime.jsxs("div", { className: 'setup-password-knowledge-check-view__content', children: [jsxRuntime.jsx("div", { className: 'setup-password-knowledge-check-view__icon-container', children: jsxRuntime.jsx(Icon.Icon, { color: 'brand-primary', children: jsxRuntime.jsx(knowledgeCheckIcon.ReactComponent, { width: 56, height: 56 }) }) }), jsxRuntime.jsx(Typography.Typography, { variant: 'body_small', color: 'primary', weight: 'medium', copykey: 'dyn_setup_password.knowledge_check.description', className: 'setup-password-knowledge-check-view__description', children: t('dyn_setup_password.knowledge_check.description') })] }), jsxRuntime.jsxs("div", { className: 'setup-password-knowledge-check-view__alert', children: [jsxRuntime.jsx(Typography.Typography, { variant: 'body_small', color: 'primary', weight: 'semibold', copykey: 'dyn_setup_password.knowledge_check.question', className: 'setup-password-knowledge-check-view__question', children: t('dyn_setup_password.knowledge_check.question') }), jsxRuntime.jsx("div", { className: 'setup-password-knowledge-check-view__options', children: OPTIONS.map((option) => {
                                                const isSelected = selectedAnswer === option.value;
                                                const hasError = showError && isSelected;
                                                return (jsxRuntime.jsxs("div", { className: `setup-password-knowledge-check-view__option ${isSelected
                                                        ? 'setup-password-knowledge-check-view__option--selected'
                                                        : ''} ${hasError
                                                        ? 'setup-password-knowledge-check-view__option--error'
                                                        : ''}`, onClick: () => handleAnswerChange({
                                                        target: { value: option.value },
                                                    }), children: [jsxRuntime.jsx(Typography.Typography, { variant: 'body_normal', color: hasError
                                                                ? 'error-1'
                                                                : isSelected
                                                                    ? 'brand-primary'
                                                                    : 'tertiary', weight: 'bold', className: 'setup-password-knowledge-check-view__option-label', children: option.label }), jsxRuntime.jsx(Typography.Typography, { variant: 'body_small', color: 'primary', children: t(option.translationKey) })] }, option.value));
                                            }) })] })] }), jsxRuntime.jsxs("div", { children: [showError && (jsxRuntime.jsx(Alert.Alert, { variant: 'error', icon: jsxRuntime.jsx(exclamationCircle.ReactComponent, {}), className: 'setup-password-knowledge-check-view__error', children: t('dyn_setup_password.knowledge_check.error') })), jsxRuntime.jsx("div", { className: 'setup-password-knowledge-check-view__actions', children: jsxRuntime.jsx(TypographyButton.TypographyButton, { dataTestId: 'setup-password-knowledge-check-continue-button', onClick: handleContinue, disabled: !selectedAnswer, copykey: 'dyn_setup_password.button.confirm', buttonVariant: 'brand-primary', typographyProps: {
                                            color: 'inherit',
                                        }, expanded: true, children: t('dyn_setup_password.button.confirm') }) })] })] }) })] }));
};

exports.SetupPasswordKnowledgeCheckView = SetupPasswordKnowledgeCheckView;
